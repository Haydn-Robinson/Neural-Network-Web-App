{% extends 'layout.html' %}
{% block content %}
<div class="wrapper">
    <div class="main-title-container">
        <h1>{{ title }}</h1>
    </div>
    <div>
        Auroc:<span class="auroc-span"></span>
    </div>
    <div class="error-msg">
        <a href="{{ url_for('views.network_setup') }}">
            Warning, the trained network has performance that is no better than random chance.<br/><br />
            This may be because the selected options are not appropriate. If the suggested options were used
            the optimiser may have got stuck during the training process.<br /><br />
            Click this message to return to the setup screen and try again.
        </a>
    </div>
    <div class="btn-container">
        <button>Download Training Summary</button>
    </div>
</div>

<script>
    errorMsg = document.querySelector('.error-msg');
    aurocDisplay = document.querySelector('.auroc-span');
    fetch("{{ url_for('views.get_results') }}")
        .then(response => response.json())
        .then(function (data) {
            aurocDisplay.innerHTML = data.auroc
            console.log(data.training_failed)
            if (data.training_failed) {
                errorMsg.style.display = 'block';
            }
        });

    const button = document.querySelector('button');
    function download() {
        window.location.href = "{{ url_for('views.get_training_summary') }}";
    }
    button.addEventListener('click', download);

</script>

    {% endblock content %}
